{"ast":null,"code":"/**\n * @author Alicia Quek Chik Wen <aque0004@student.monash.edu>\n * @author Foo Kai Yan 33085625 <kfoo0012@student.monash.edu>\n *\n * Alicia responsible for backend\n * Kai Yan responsible for frontend\n */\nimport { inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/database.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"*Email is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"*Email is Invalid\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"*Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = \"*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;height:100vh;background:url(https://img.freepik.com/free-photo/medicine-blue-background-flat-lay_23-2149341573.jpg) no-repeat center center fixed;background-size:cover;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.login-box[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);padding:40px;border-radius:10px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);box-shadow:0 10px 25px #0000004d;text-align:center;width:350px}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#fff;font-size:24px;font-weight:600}.input-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-size:14px;margin-bottom:5px;display:block}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:5px;outline:none;background-color:#fffc}.terms[_ngcontent-%COMP%]{margin:10px 0;color:#fff;display:flex;align-items:center;justify-content:center}.terms[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}.login-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#e35b20;border:none;border-radius:5px;color:#fff;font-size:16px;cursor:pointer;transition:background-color .3s ease}.login-btn[_ngcontent-%COMP%]:hover{background-color:#d44a18}.register-link[_ngcontent-%COMP%]{margin-top:15px;font-size:14px}.register-link[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important;text-decoration:underline}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.required[_ngcontent-%COMP%]{color:red;font-size:14px;display:block}\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    /**\n     * The constructor of this component has three dependencies: the DatabaseService, the ActivatedRoute, and the Router\n     * @param dbService Service used to fetch and manage data from the database\n     * @param router Service used for navigation between components/pages\n     * @param route Provides information about the current route in the application\n     */\n    constructor(dbService, router, route) {\n      this.dbService = dbService;\n      this.router = router;\n      this.route = route;\n      this.fb = inject(FormBuilder);\n    }\n    ngOnInit() {\n      this.loginForm = this.fb.group({\n        userEmail: ['', Validators.compose([Validators.required, Validators.email])],\n        password: ['', Validators.required]\n      });\n    }\n    /**\n     * @function login function passes login object to the service to be sent to the server via a post request.\n     * @summary A login object is created based on the form inputs and is submitted to be stored in the MongoDB database.\n     * @description onSubmit is triggered when the html form is submitted and the login object is created and sent to the DatabaseService to add it to the MongoDB database.\n    */\n    login() {\n      console.log(this.loginForm.value);\n      this.dbService.loginService(this.loginForm.value).subscribe({\n        // uses the router service to redirect the client to another component. \n        // In other words, replace the current component with another one.\n        next: res => {\n          alert(\"Login Success\");\n          console.log(\"res.toString()\", res.toString());\n          localStorage.setItem(\"user_id\", res.toString());\n          this.loginForm.reset();\n          this.router.navigate([\"/home\"]);\n        },\n        error: error => {\n          console.log('Error:', error);\n          alert(\"Login Failed! Try again!\");\n          this.router.navigate([\"/login\"]);\n        }\n      });\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.DatabaseService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 28,\n      vars: 7,\n      consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"login-container\"], [1, \"login-box\"], [3, \"formGroup\"], [1, \"input-group\"], [\"for\", \"email\"], [\"formControlName\", \"userEmail\", \"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", \"placeholder\", \"Enter Email\"], [\"class\", \"required\", 4, \"ngIf\"], [\"for\", \"password\"], [\"formControlName\", \"password\", \"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Enter Password\"], [1, \"login-btn\", 3, \"disabled\", \"click\"], [1, \"register-link\"], [\"routerLink\", \"/register\", 2, \"color\", \"#d44a18\"], [1, \"required\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n          i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n          i0.ɵɵelementStart(4, \"title\");\n          i0.ɵɵtext(5, \"Login Page\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"body\")(7, \"div\", 3)(8, \"div\", 4)(9, \"h2\");\n          i0.ɵɵtext(10, \"LOGIN\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"form\", 5)(12, \"div\", 6)(13, \"label\", 7);\n          i0.ɵɵtext(14, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 8);\n          i0.ɵɵtemplate(16, LoginComponent_span_16_Template, 2, 0, \"span\", 9);\n          i0.ɵɵtemplate(17, LoginComponent_span_17_Template, 2, 0, \"span\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 6)(19, \"label\", 10);\n          i0.ɵɵtext(20, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"input\", 11);\n          i0.ɵɵtemplate(22, LoginComponent_span_22_Template, 2, 0, \"span\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_23_listener() {\n            return ctx.login();\n          });\n          i0.ɵɵtext(24, \"Login\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"div\", 13)(26, \"a\", 14);\n          i0.ɵɵtext(27, \"Create Account\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.loginForm.hasError(\"required\", \"userEmail\") && ctx.loginForm.controls[\"userEmail\"].dirty);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loginForm.hasError(\"email\", \"userEmail\"));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.loginForm.hasError(\"required\", \"password\") && ctx.loginForm.controls[\"password\"].dirty);\n          i0.ɵɵadvance(1);\n          i0.ɵɵclassProp(\"disabled\", ctx.loginForm.invalid);\n          i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i2.RouterLink, i4.FormGroupDirective, i4.FormControlName],\n      styles: [_c0, _c0]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}