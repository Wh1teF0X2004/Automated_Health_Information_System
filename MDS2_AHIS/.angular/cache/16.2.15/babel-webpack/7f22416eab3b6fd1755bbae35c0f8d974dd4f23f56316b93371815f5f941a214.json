{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/database.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../../pipes/date-format.pipe\";\nexport let UpdatePatientComponent = /*#__PURE__*/(() => {\n  class UpdatePatientComponent {\n    /**\n     * @constructor The constructor of this component has three dependencies: the DatabaseService, the ActivatedRoute, and the Router\n     * @param dbService Service used to fetch and manage data from the database\n     * @param router Service used for navigation between components/pages\n     * @param route Provides information about the current route in the application\n     */\n    constructor(dbService, router, route) {\n      this.dbService = dbService;\n      this.router = router;\n      this.route = route;\n      // Database\n      this.patientDB = [];\n      this.aPatient = {};\n      // Generate new patient object\n      this.patient = {\n        patientId: \"\",\n        maritalStatus: \"\",\n        streetAddress: \"\",\n        city: \"\",\n        state: \"\",\n        postalCode: \"\",\n        email: \"\",\n        tel: \"\",\n        emgcyFName: \"\",\n        emgcyLName: \"\",\n        emgcyRelationship: \"\",\n        emgcyTel: \"\"\n      };\n    }\n    /**\n     * @function ngOnInit runs when the component is initiated\n     * @description calls various methods to fetch patient records\n     */\n    ngOnInit() {\n      this.getUpdateIdPatient();\n      this.getUpdatePatientRecord();\n    }\n    /**\n     * @function getUpdateIdPatient Retrieves the patientId from the URL route parameters and assigns it to the patient object\n     * @description Retrieves the patientId from the URL route parameters and assigns it to the patient object\n     */\n    getUpdateIdPatient() {\n      this.route.paramMap.subscribe(params => {\n        this.patient.patientId = params.get('patientId');\n        console.log(\"Get Patient ID to update: \", this.patient.patientId);\n      });\n    }\n    /**\n     * @function getUpdatePatientRecord Fetches all patients from the database and finds the patient that matches the patientId\n     * @description Fetches all patients from the database and finds the patient that matches the patientId.\n     * @summary It assigns the retrieved patient data to the form fields for updating\n     */\n    getUpdatePatientRecord() {\n      this.dbService.getPatients().subscribe(patientDB => {\n        console.log(\"Patient ID to update: \", this.patient.patientId);\n        for (let patient of patientDB) {\n          if (patient.patientId === this.patient.patientId) {\n            this.aPatient = patient;\n            console.log(\"Update this patient\", this.aPatient);\n            // Updates the component’s patient fields with the corresponding values from this.aPatient to have it appear \n            //  automatically in the form.\n            this.patient.maritalStatus = this.aPatient.maritalStatus;\n            this.patient.streetAddress = this.aPatient.streetAddress;\n            this.patient.city = this.aPatient.city;\n            this.patient.state = this.aPatient.state;\n            this.patient.postalCode = this.aPatient.postalCode;\n            this.patient.email = this.aPatient.email;\n            this.patient.tel = this.aPatient.tel;\n            this.patient.emgcyFName = this.aPatient.emgcyFName;\n            this.patient.emgcyLName = this.aPatient.emgcyLName;\n            this.patient.emgcyRelationship = this.aPatient.emgcyRelationship;\n            this.patient.emgcyTel = this.aPatient.emgcyTel;\n            console.log(\"Assigning stuff\", this.patient);\n          }\n        }\n      });\n    }\n    /**\n     * @function sendUpdatePatient\n     * @description Sends the updated patient data to the DatabaseService for saving\n     * If successful, navigates to the updated patient's detail page\n     * If unsuccessful, redirects to the '/invalid-data' page\n     */\n    sendUpdatePatient() {\n      console.log(\"Send patient object for update\", this.patient);\n      this.dbService.updatePatient(this.patient).subscribe({\n        next: result => {\n          this.router.navigate([\"/view-patient\", this.patient.patientId]);\n        },\n        error: error => {\n          this.router.navigate([\"/invalid-data\"]);\n        }\n      });\n    }\n    static #_ = this.ɵfac = function UpdatePatientComponent_Factory(t) {\n      return new (t || UpdatePatientComponent)(i0.ɵɵdirectiveInject(i1.DatabaseService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UpdatePatientComponent,\n      selectors: [[\"app-update-patient\"]],\n      decls: 109,\n      vars: 20,\n      consts: [[1, \"row\", \"justify-content-center\"], [1, \"card\", 2, \"width\", \"1000px\", \"margin-bottom\", \"2rem\"], [1, \"container\", 2, \"width\", \"95%\"], [\"align\", \"center\"], [1, \"row\"], [\"for\", \"name\", 1, \"form-label\"], [1, \"col-md-6\", \"mb-4\", \"pb-2\"], [\"data-mdb-input-init\", \"\", 1, \"form-outline\"], [\"type\", \"text\", \"name\", \"patientFirstName\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [\"type\", \"text\", \"name\", \"patientLastName\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [\"for\", \"birthDate\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"patientDob\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [\"for\", \"gender\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"patientGender\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [\"type\", \"text\", \"name\", \"patientNationality\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [\"type\", \"text\", \"name\", \"patientID\", \"disabled\", \"\", 1, \"form-control\", 3, \"placeholder\"], [1, \"mb-3\"], [\"for\", \"floatingSelect\"], [\"type\", \"text\", \"name\", \"patientMaritalStatus\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientTel\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientEmail\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientStreetAddress\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientCity\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientState\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"patientAge\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"emergencyFirstName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"emergencyLastName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"emergencyRelationship\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"emergencyTel\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bg-dark\", \"text-center\", \"text-white\"], [1, \"text-center\", \"p-3\", 2, \"background-color\", \"rgba(0, 0, 0, 0.2)\"], [1, \"text-white\"]],\n      template: function UpdatePatientComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\", 3);\n          i0.ɵɵtext(4, \"\\u00A0\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"h1\", 3);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"p\", 3);\n          i0.ɵɵtext(8, \"\\u00A0\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"h4\");\n          i0.ɵɵtext(10, \"Personal Details\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 4)(12, \"label\", 5);\n          i0.ɵɵtext(13, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 6)(15, \"div\", 7);\n          i0.ɵɵelement(16, \"input\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 6)(18, \"div\", 7);\n          i0.ɵɵelement(19, \"input\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 6)(21, \"div\", 7)(22, \"label\", 10);\n          i0.ɵɵtext(23, \"Date of Birth\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"input\", 11);\n          i0.ɵɵpipe(25, \"dateFormat\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 6)(27, \"div\", 7)(28, \"label\", 12);\n          i0.ɵɵtext(29, \"Gender \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(30, \"input\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"div\", 6)(32, \"div\", 7)(33, \"label\", 5);\n          i0.ɵɵtext(34, \"Nationality\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(35, \"input\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"div\", 6)(37, \"div\", 7)(38, \"label\", 5);\n          i0.ɵɵtext(39, \"Identification Number (IC)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(40, \"input\", 15);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(41, \"div\", 4)(42, \"div\", 6)(43, \"div\", 16)(44, \"label\", 17);\n          i0.ɵɵtext(45, \"Marital Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"input\", 18);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_46_listener($event) {\n            return ctx.patient.maritalStatus = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(47, \"div\", 4)(48, \"div\", 6)(49, \"div\", 7)(50, \"label\", 5);\n          i0.ɵɵtext(51, \"Contact Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"input\", 19);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_52_listener($event) {\n            return ctx.patient.tel = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(53, \"div\", 6)(54, \"div\", 7)(55, \"label\", 5);\n          i0.ɵɵtext(56, \"E-mail\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"input\", 20);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_57_listener($event) {\n            return ctx.patient.email = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(58, \"div\", 16)(59, \"label\", 5);\n          i0.ɵɵtext(60, \"Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"input\", 21);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_61_listener($event) {\n            return ctx.patient.streetAddress = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(62, \"div\", 4)(63, \"div\", 6)(64, \"div\", 7)(65, \"label\", 5);\n          i0.ɵɵtext(66, \"City\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"input\", 22);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_67_listener($event) {\n            return ctx.patient.city = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(68, \"div\", 6)(69, \"div\", 7)(70, \"label\", 5);\n          i0.ɵɵtext(71, \"State\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(72, \"input\", 23);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_72_listener($event) {\n            return ctx.patient.state = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(73, \"div\", 16)(74, \"label\", 5);\n          i0.ɵɵtext(75, \"Postal / Zip Code\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(76, \"input\", 24);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_76_listener($event) {\n            return ctx.patient.postalCode = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(77, \"h4\");\n          i0.ɵɵtext(78, \"Emergency Contact\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(79, \"div\", 4)(80, \"div\", 6)(81, \"label\", 5);\n          i0.ɵɵtext(82, \"First Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(83, \"div\", 7)(84, \"input\", 25);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_84_listener($event) {\n            return ctx.patient.emgcyFName = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(85, \"div\", 6)(86, \"label\", 5);\n          i0.ɵɵtext(87, \"Last Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(88, \"div\", 7)(89, \"input\", 26);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_89_listener($event) {\n            return ctx.patient.emgcyLName = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(90, \"div\", 6)(91, \"div\", 7)(92, \"label\", 5);\n          i0.ɵɵtext(93, \"Relation\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(94, \"input\", 27);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_94_listener($event) {\n            return ctx.patient.emgcyRelationship = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(95, \"div\", 6)(96, \"div\", 7)(97, \"label\", 5);\n          i0.ɵɵtext(98, \"Contact Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(99, \"input\", 28);\n          i0.ɵɵlistener(\"ngModelChange\", function UpdatePatientComponent_Template_input_ngModelChange_99_listener($event) {\n            return ctx.patient.emgcyTel = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelement(100, \"hr\");\n          i0.ɵɵelementStart(101, \"button\", 29);\n          i0.ɵɵlistener(\"click\", function UpdatePatientComponent_Template_button_click_101_listener() {\n            return ctx.sendUpdatePatient();\n          });\n          i0.ɵɵtext(102, \"Submit\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(103, \"p\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(104, \"footer\", 30)(105, \"div\", 31);\n          i0.ɵɵtext(106, \" \\u00A9 2024 Built by: \");\n          i0.ɵɵelementStart(107, \"a\", 32);\n          i0.ɵɵtext(108, \"MDS02\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"Update Details for Patient ID: \", ctx.aPatient.patientId, \"\");\n          i0.ɵɵadvance(10);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.aPatient.firstName);\n          i0.ɵɵadvance(3);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.aPatient.lastName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(25, 18, ctx.aPatient.birthDate));\n          i0.ɵɵadvance(6);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.aPatient.gender);\n          i0.ɵɵadvance(5);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.aPatient.nationality);\n          i0.ɵɵadvance(5);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.aPatient.identificationNum);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.maritalStatus);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.tel);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.email);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.streetAddress);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.city);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.state);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.postalCode);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.emgcyFName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.emgcyLName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.emgcyRelationship);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.patient.emgcyTel);\n        }\n      },\n      dependencies: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.DateFormatPipe]\n    });\n  }\n  return UpdatePatientComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}